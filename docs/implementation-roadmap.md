# 実装ロードマップ - ビジュアルガイド

このドキュメントは、こいこいルールエンジンの実装計画を視覚的に示したガイドです。

## 全体の流れ

```
仕様書の分析 → プロジェクトセットアップ → MVP開発 → 完全ルール → 拡張機能 → 最適化
    ✓              Issue #8           Phase 1    Phase 2     Phase 3     Phase 4
                                    (2-3週間)   (1-2週間)    (1週間)     (1週間)
```

## フェーズ1: 基本機能（MVP） - 2-3週間

```
┌─────────────────────────────────────────────────────────────────────┐
│                        フェーズ1: MVP                                │
│                    基本的なゲームが遊べる                              │
└─────────────────────────────────────────────────────────────────────┘

Week 1: 基盤構築
┌──────────────┐
│ Issue #8     │  プロジェクト構造
│ セットアップ   │  ├─ ソリューション作成
└──────────────┘  ├─ 3つのプロジェクト
                  └─ テストプロジェクト

┌──────────────┐  ┌──────────────┐
│ Issue #9     │  │ Issue #11     │  並行開発可能
│ データモデル   │  │ 状態管理     │
└──────────────┘  └──────────────┘
    │                  │
    v                  v
┌──────────────┐  ┌──────────────┐
│ Issue #10     │  │ Issue #12     │
│ 札の定義      │  │ 山札管理     │
└──────────────┘  └──────────────┘

Week 2: コアロジック
┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│ Issue #13     │  │ Issue #14     │  │ Issue #15     │
│ 役判定       │→ │ 得点計算     │  │ ターン進行    │
│ (基本役のみ)  │  │              │  │              │
└──────────────┘  └──────────────┘  └──────────────┘

Week 3: ゲーム統合
┌──────────────┐  ┌──────────────┐
│ Issue #16     │  │ Issue #17    │
│ アクション    │→ │ ファサード    │
└──────────────┘  └──────────────┘
                      │
                      v
┌──────────────┐  ┌──────────────┐
│ Issue #18    │→ │ Issue #19    │
│ 配札・勝敗    │  │ 統合テスト    │ ← MVP完成！
└──────────────┘  └──────────────┘
```

### MVP完成時にできること
✓ 手札から札を出す
✓ 場の札を取得する
✓ 山札から引く
✓ 基本的な役を判定（光札、種、短冊、カス）
✓ 得点を計算
✓ 勝敗を決定
✓ ゲームを最後まで遊ぶ

### MVP完成時にできないこと
✗ こいこいの選択
✗ 喰い付き
✗ 特殊な役（猪鹿蝶、赤短など）
✗ カスタムルール

---

## フェーズ2: 完全なルール実装 - 1-2週間

```
┌─────────────────────────────────────────────────────────────────────┐
│                      フェーズ2: 完全ルール                            │
│                  本格的なこいこいが遊べる                              │
└─────────────────────────────────────────────────────────────────────┘

Week 4: こいこいと特殊ルール
┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│ Issue #20    │  │ Issue #21    │  │ Issue #22    │  並行開発可能
│ こいこい      │  │ 喰い付き      │  │ 猪鹿蝶等     │
│              │  │              │  │ 花見・月見    │
└──────────────┘  └──────────────┘  └──────────────┘

┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│ Issue #23    │  │ Issue #24    │  │ Issue #25    │  並行開発可能
│ 赤短・青短    │  │ 総流れ        │  │ 再配札       │
└──────────────┘  └──────────────┘  └──────────────┘
                                          │
                                          v
                                  ┌──────────────┐
                                  │ Issue #26    │
                                  │ 統合テスト    │ ← 完全ルール完成！
                                  └──────────────┘

並行実装:
┌──────────────┐
│ Issue #35    │  エラーハンドリング
└──────────────┘
```

### フェーズ2完成時にできること
✓ こいこいを宣言して続行
✓ こいこいのリスクとリターン
✓ 喰い付きで4枚取得
✓ 全ての役を判定（13種類）
✓ 8ターンで総流れ（引き分け）
✓ 配札エラーで再配札

---

## フェーズ3: 拡張機能 - 1週間

```
┌─────────────────────────────────────────────────────────────────────┐
│                      フェーズ3: 拡張機能                              │
│                  カスタマイズとイベント                                │
└─────────────────────────────────────────────────────────────────────┘

Week 5: 拡張とカスタマイズ
┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│ Issue #27    │  │ Issue #28    │  │ Issue #29    │  並行開発可能
│ 手四         │  │ ルール設定    │  │ イベント     │
│ (オプション)  │  │ カスタマイズ  │  │ システム     │
└──────────────┘  └──────────────┘  └──────────────┘
                                          │
                                          v
                                  ┌──────────────┐
                                  │ Issue #30    │
                                  │ 統合テスト    │ ← 拡張機能完成！
                                  └──────────────┘
```

### フェーズ3完成時にできること
✓ 手四で役満勝ち（オプション）
✓ 役の得点をカスタマイズ
✓ こいこいの倍率変更
✓ ゲームイベントの記録と追跡

---

## フェーズ4: 高度な機能 - 1週間

```
┌─────────────────────────────────────────────────────────────────────┐
│                      フェーズ4: 高度な機能                            │
│                  最適化とプロダクション準備                            │
└─────────────────────────────────────────────────────────────────────┘

Week 6: 最適化と仕上げ
┌──────────────┐  ┌──────────────┐  ┌──────────────┐
│ Issue #31    │  │ Issue #32    │  │ Issue #33    │  並行開発可能
│ パフォーマンス │  │ 詳細ログ      │  │ リプレイ     │
│ 最適化       │  │ 機能         │  │ 機能         │
└──────────────┘  └──────────────┘  └──────────────┘
                                          │
                                          v
                                  ┌──────────────┐
                                  │ Issue #34    │
                                  │ 最終調整     │ ← リリース準備完了！
                                  └──────────────┘

並行実装:
┌──────────────┐
│ Issue #36    │  APIドキュメント
└──────────────┘
```

### フェーズ4完成時にできること
✓ 高速な役判定とゲーム進行
✓ 詳細なデバッグログ
✓ ゲームのリプレイと分析
✓ 完全なAPIドキュメント

---

## その他のタスク（いつでも実装可能）

```
┌──────────────┐
│ Issue #37    │  CI/CD設定 - プロジェクト初期から並行実装推奨
└──────────────┘

┌──────────────┐
│ Issue #35    │  エラーハンドリング - フェーズ2で実装
└──────────────┘

┌──────────────┐
│ Issue #36    │  APIドキュメント - フェーズ4で実装
└──────────────┘
```

---

## 依存関係の可視化

### クリティカルパス（最優先の実装順序）

```
┌────┐    ┌────┐    ┌────┐    ┌────┐    ┌────┐    ┌────┐
│ #8 │ -> │ #9 │ -> │ #10 │ -> │ #12 │ -> │ #13 │ -> │ #14 │
└────┘    └────┘    └────┘    └────┘    └────┘    └────┘
  │                                                    │
  v                                                    v
┌────┐    ┌────┐    ┌────┐    ┌────┐    ┌────┐    ┌────┐
│ #11 │ -> │ #15 │ -> │ #16 │ -> │#17 │ -> │#18 │ -> │#19 │
└────┘    └────┘    └────┘    └────┘    └────┘    └────┘
                                                      │
                                                      v
                                                  MVP完成
```

### 並行実装の例

```
Time ────────────────────────────────────────────────>

開発者A:  #8  →  #9  →  #10  →  #13  →  #14  →  #19
                                              
開発者B:       #37 →  #11  →  #15  →  #16  →  #17  ↗

開発者C:            #12  →  #18  ────────────→  ↗
```

---

## マイルストーンと成果物

### M1: MVP完成（3週間後）

**成果物:**
- 動作するこいこいルールエンジン（基本機能のみ）
- ユニットテストスイート（カバレッジ70%以上）
- 基本的なドキュメント

**デモ可能な内容:**
- 札を配って手札を出す
- 場の札を取得する
- 基本的な役を判定する
- 得点を計算して勝敗を決める

---

### M2: 完全ルール実装（5週間後）

**成果物:**
- こいこいを含む完全なルールエンジン
- 全ての役判定（13種類）
- 特殊ルール（喰い付き、総流れ）
- ユニットテストスイート（カバレッジ80%以上）

**デモ可能な内容:**
- こいこいを宣言して続行
- 喰い付きで4枚取得
- 赤短、青短、猪鹿蝶などの特殊な役
- 8ターンで総流れ

---

### M3: 拡張機能実装（6週間後）

**成果物:**
- カスタマイズ可能なルールエンジン
- イベントシステム
- 手四のオプション実装
- ユニットテストスイート（カバレッジ85%以上）

**デモ可能な内容:**
- 役の得点をカスタマイズ
- ゲームイベントの記録
- 手四で役満勝ち（オプション）

---

### M4: リリース準備完了（7-8週間後）

**成果物:**
- 最適化されたルールエンジン
- リプレイ機能
- 詳細なログ機能
- 完全なAPIドキュメント
- ベンチマークレポート

**デモ可能な内容:**
- 高速なゲーム進行
- ゲームのリプレイと分析
- 詳細なデバッグ情報

---

## 推奨開発フロー

### 個人開発の場合

```
Week 1-3:  フェーズ1（MVP）に集中
           ↓
Week 4-5:  フェーズ2（完全ルール）に集中
           ↓
Week 6:    フェーズ3（拡張機能）に集中
           ↓
Week 7-8:  フェーズ4（最適化）に集中
```

### チーム開発の場合（3人）

```
メンバーA:  コアロジック担当
  Week 1-2: #8, #9, #10, #13, #14
  Week 3-4: #22, #23, #28
  Week 5-6: #31, #36

メンバーB:  ゲームフロー担当
  Week 1-2: #11, #15, #16, #17
  Week 3-4: #20, #21, #29
  Week 5-6: #32, #33

メンバーC:  インフラ・テスト担当
  Week 1-2: #37, #12, #18
  Week 3-4: #24, #25, #35
  Week 5-6: #19, #26, #30, #34
```

---

## 品質チェックポイント

### 各フェーズ完了時

- [ ] 全てのテストが成功
- [ ] コードカバレッジが基準を満たす
- [ ] ドキュメントが更新されている
- [ ] CI/CDパイプラインが成功
- [ ] コードレビューが完了

### リリース前

- [ ] 全機能の動作確認
- [ ] パフォーマンステスト実施
- [ ] セキュリティチェック
- [ ] APIドキュメント完成
- [ ] リリースノート作成

---

**作成日**: 2025-11-17  
**バージョン**: 1.0
